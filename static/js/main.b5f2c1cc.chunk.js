(this["webpackJsonpbasic-metronome-react-hooks"]=this["webpackJsonpbasic-metronome-react-hooks"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a,i,r,o,c,s,l=n(0),u=n(1),d=n.n(u),m=n(7),b=n.n(m),v=(n(15),n(8)),h=n(5),j=(n(16),n(20)),f=n(21),p=0,g=0,O=function(){var e=Object(u.useState)(!1),t=Object(h.a)(e,2),n=t[0],d=t[1],m=Object(u.useState)(100),b=Object(h.a)(m,2),O=b[0],_=b[1],w=Object(u.useState)(10),x=Object(h.a)(w,2),k=x[0],N=x[1],S=function(e){return 6e4/e}(O)/1e3,y=S/2,T="-active";c=document.getElementsByClassName("Circles_beat"),Object(u.useEffect)((function(){a=new AudioContext,o=k-1;return n?(a.resume(),clearInterval(i),i=setInterval((function(){a.currentTime-p>=y&&(p=g=p+S,function(e,t){null!==(s=document.querySelector(".-active"))&&s.classList.remove(T),r>0?c[r-1].classList.remove(T):c[o].classList.remove(T);var n=e.createOscillator();n.connect(e.destination),n.start(t),n.stop(t+1/16),n.frequency.value=0===r?"800":"400",Number(c[r].dataset.index)===r&&c[r].classList.add(T),r===o?r=0:r+=1}(a,g))}),S/25)):(a.suspend(),clearInterval(i),p=0,g=0,r=0),function(){return clearInterval(i)}}));return Object(l.jsxs)("div",{id:"metronome",children:[Object(l.jsx)("div",{className:"Circles",children:Object(v.a)(Array(k)).map((function(e,t){return Object(l.jsx)("div",{"data-index":t,className:"Circles_beat"+(n?" Circles_beat--plays":"")},t)}))}),Object(l.jsxs)("div",{className:"TimeSignature",children:[Object(l.jsxs)("label",{className:"TimeSignature__label",htmlFor:"TimeSignature__Input",children:[Object(l.jsx)("div",{className:"TimeSignature__label__numerator",children:k}),Object(l.jsx)("hr",{className:"TimeSignature__label__divider"}),Object(l.jsx)("div",{className:"TimeSignature__label__denominator",children:"4"})]}),Object(l.jsx)("input",{className:"TimeSignature__input",id:"TimeSignature__input",type:"range",min:"2",max:"20",step:"1",onChange:function(e){a.suspend(),N(Number(e.target.value)),p=0,g=0,r=0},value:k})]}),Object(l.jsxs)("div",{className:"Bpm",children:[Object(l.jsxs)("label",{className:"Bpm_label",htmlFor:"Bpm_input",children:[O," BPM"]}),Object(l.jsx)("input",{className:"Bpm_input",id:"Bpm_input",type:"range",min:"40",max:"200",step:"1",onChange:function(e){a.suspend(),_(e.target.value),p=0,g=0,r=0},value:O})]}),Object(l.jsx)("button",{className:"PlayButton",onClick:function(){return d(!0!==n)},children:n?Object(l.jsx)(f.a,{}):Object(l.jsx)(j.a,{})})]})},_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}b.a.render(Object(l.jsx)(d.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/basic-metronome-react-hooks",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/basic-metronome-react-hooks","/serviceWorkerRegistration.js");_?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):w(t,e)}))}}()}},[[19,1,2]]]);
//# sourceMappingURL=main.b5f2c1cc.chunk.js.map